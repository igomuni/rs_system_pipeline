# Changelog

## [1.0.0] - 2025-10-03

### 実装完了
- 2014-2023年度の行政事業レビューデータの完全処理
- RSシステム形式への変換パイプライン

### 主な機能

#### データ処理
- **全10年分対応**: 2014年から2023年までの行政事業レビューデータを処理
- **多様な形式対応**: Excel（1シート/2シート構成）、ZIP形式に対応
- **総レコード数**: 1,348,583件を処理

#### テーブル構造
3種類のテーブルを生成：
1. **基本情報・事業概要** (1-2): 51,557件
2. **予算・執行サマリ** (2-1): 534,477件
3. **支出先情報** (5-1): 762,549件

#### 予算事業ID統一化
- 各年度で1から始まる通し番号を採用
- 3テーブル間で完全紐付け可能
- RS_2024形式に準拠

#### データ正規化
- neologdnによる日本語テキスト正規化
- カスタム正規化ロジック（全角/半角統一、ゆらぎ吸収）
- 和暦→西暦変換（2桁年号含む、明治時代から対応）

#### 支出先データ抽出
- 2014年形式（グループ形式）対応
- 2015年以降形式（ブロック形式）対応
- 全10年分の支出先上位10者データを完全抽出

### 技術的改善

#### Stage 3: テーブル構築
- 各テーブルで全行処理（各行=1事業）に変更
- 予算事業IDの事前割り当て方式を採用
- 年度開始時にIDカウンターリセット

#### パターンマッチング改善
- 予算年度の2桁表記対応（例: `-23年度` → 平成23年度）
- 支出先フィールドのパターン修正（`-支出先` 形式に対応）
- 2014年グループ形式と2015年以降ブロック形式の両対応

### パフォーマンス
- Stage 3処理時間: 約10分（全10年度）
- メモリ効率: 大規模CSVファイルの段階的処理

### 出力
- 年度別ディレクトリ構造: `output/processed/year_YYYY/`
- CSVファイル命名規則: `{table_id}_{year}_{table_name}.csv`
- スキーマ定義: JSON形式で各テーブルの構造を出力
