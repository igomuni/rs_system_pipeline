# 年度別テーブル生成可否レポート

生成日時: 2025-10-07

## サマリ

Phase 2で実装した9種類のテーブルについて、2014-2023年の各年度で生成可能かを調査しました。

## 調査結果

| 年度 | 1-4<br>補助率 | 2-2<br>予算種別 | 5-4<br>国庫債務 | 1-3<br>政策施策 | 1-5<br>関連事業 | 4-1<br>点検評価 | 5-3<br>費目使途 | 6-1<br>備考 | 1-1<br>組織情報 |
|------|:--------:|:----------:|:---------:|:----------:|:----------:|:----------:|:----------:|:------:|:----------:|
| 2014 | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ✗ | ? |
| 2015 | ✗ | ✗ | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2016 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2017 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2018 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2019 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2020 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2021 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2022 | ✗ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 2023 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |

**凡例**:
- ✓: 必須列が存在し、生成可能
- ✗: 必須列が存在せず、生成不可
- ?: 未調査（基本列のみで生成可能な可能性あり）

---

## ファイル別詳細

### ✅ 全年度対応可能 (2015-2023)

#### 1-1_組織情報 (22列)
- **対応年度**: 2015-2023 (9年)
- **必須列**: 事業名、府省庁、局・庁など（基本情報）
- **備考**: 基本列のみで構成されるため、ほぼ全年度対応可能

#### 6-1_その他備考 (14列)
- **対応年度**: 2015-2023 (9年)
- **必須列**: 備考フィールド
- **備考**: 2015年以降でデータ存在

#### 1-3_政策・施策、法令等 (28列)
- **対応年度**: 2015-2023 (9年)
- **必須列**: 政策体系、関連法令
- **備考**: 2015年からフォーマット統一

#### 4-1_点検・評価 (37列)
- **対応年度**: 2015-2023 (9年)
- **必須列**: 点検・改善の評価項目
- **備考**: 2015年から一貫して存在

#### 5-3_費目・使途 (20列)
- **対応年度**: 2015-2023 (9年)
- **必須列**: 費目・使途の詳細
- **備考**: 2015年から継続

#### 1-5_関連事業 (17列)
- **対応年度**: 2015-2022 (8年)
- **必須列**: 関連事業番号、事業名
- **備考**: 2023年で列構造変更の可能性あり

---

### ⚠️ 一部年度のみ対応

#### 2-2_予算種別・歳出予算項目 (26列)
- **対応年度**: 2016-2023 (8年)
- **必須列**: 予算内訳、歳出予算項・目
- **非対応**: 2014-2015年（予算内訳構造が異なる）
- **備考**: 2022年対応済み（年度間差異対応実装済み）

#### 5-4_国庫債務負担行為等による契約 (27列)
- **対応年度**: 2016-2023 (8年)
- **必須列**: 国庫債務負担行為による契約情報
- **非対応**: 2014-2015年（契約情報列が存在しない）

---

### ❌ 2023年のみ対応

#### 1-4_補助率等 (18列)
- **対応年度**: 2023年のみ (1年)
- **必須列**: 補助率等
- **非対応**: 2014-2022年（「補助率等」列が存在しない）
- **理由**: 2023年から新設された項目と推測

---

## 2014年について

2014年は最も古いデータ形式で、ほとんどのPhase 2テーブルが生成不可です。

**生成可能な可能性があるテーブル**:
- 1-1_組織情報（基本列のみで構成）
- 既存3ファイル（1-2_事業概要、2-1_予算サマリ、5-1_支出情報）

**生成不可**: その他Phase 2テーブル（1-3, 1-4, 1-5, 2-2, 4-1, 5-3, 5-4, 6-1）

---

## 実装優先度の推奨

### 高優先度（全年度対応、影響大）

1. **2015-2021年の一括処理**
   - 対象: 7ファイル（1-1, 1-3, 1-5, 4-1, 5-3, 6-1 + 既存3ファイル）
   - 2022-2023年と同じロジックで生成可能

2. **2016-2021年の追加ファイル**
   - 対象: +2ファイル（2-2, 5-4）
   - 2022年対応ロジックが使用可能

### 中優先度（検証必要）

3. **2014年の基本対応**
   - 対象: 既存3ファイル + 1-1のみ
   - 古いフォーマットの検証が必要

### 低優先度（費用対効果低い）

4. **1-4_補助率等の2014-2022年対応**
   - 元データに情報が無いため対応不可

---

## 次のアクション

### Step 1: 2015-2021年の一括処理 (推奨)

```bash
# 2015-2021年を一括処理
for year in 2015 2016 2017 2018 2019 2020 2021; do
    python main.py --stage 3 --year $year
done
```

**期待される成果**:
- 2015年: 8ファイル生成（1-1, 1-3, 1-5, 4-1, 5-3, 6-1 + 既存3）
- 2016-2021年: 10ファイル生成（上記 + 2-2, 5-4）

### Step 2: 2014年の対応検討

2014年の古いフォーマットを詳細調査し、対応可否を判断。

---

## まとめ

| カテゴリ | 年度範囲 | 生成ファイル数 | 実装状況 |
|---------|---------|-------------|----------|
| **完全対応** | 2023年 | 12ファイル | ✅ 完了 |
| **ほぼ対応** | 2022年 | 11ファイル | ✅ 完了 |
| **高互換性** | 2016-2021年 | 10ファイル | ⏳ 未実施 |
| **中互換性** | 2015年 | 8ファイル | ⏳ 未実施 |
| **低互換性** | 2014年 | 4ファイル? | ⏳ 未調査 |

**全体カバー率**:
- 2015-2023年（9年間）で**8-12ファイル/年**生成可能
- 累計期待値: **約90ファイル**（2015-2023年の合計）
